<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Controls</name>
    <events>
        <event-group description="Управление в меню" inactive="1" sid="3832131130592746" title="MenuKey">
            <sub-events>
                <event-block any="1" sid="4583720583695985">
                    <conditions>
                        <condition id="1" name="On any click" sid="9341014313467943" type="Mouse" />
                        <condition id="6" name="On button pressed" sid="4216985188553778" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">9</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block any="1" sid="292077297469456">
                            <conditions>
                                <condition id="1" name="Is overlapping another object" sid="4950153284821895" type="Cursor">
                                    <param id="0" name="Object">Links</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <comment>Переходим по ссылкам</comment>
                                <event-block sid="3044650893068902">
                                    <conditions>
                                        <condition id="-7" name="Compare instance variable" sid="9514299512021866" type="Links">
                                            <param id="0" name="Instance variable">url</param>
                                            <param id="1" name="Comparison">1</param>
                                            <param id="2" name="Value">&quot;&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="8" name="Open URL in new window" sid="6110350127377991" type="Browser">
                                            <param id="0" name="URL">Links.url</param>
                                            <param id="1" name="Tag">&quot;NewWindow&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>Переходим по меню</comment>
                                <event-block sid="2948843507710667">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="6503593536951578" type="System" />
                                        <condition id="-7" name="Compare instance variable" sid="5071170812008854" type="Links">
                                            <param id="0" name="Instance variable">ToLayout</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;START&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="7363757376102634" type="Function">
                                            <param id="0" name="Name">&quot;StartGame&quot;</param>
                                            <param id="1" name="Parameter {n}"></param>
                                        </action>
                                    </actions>
                                </event-block>
                                <comment>Переходим по уровням</comment>
                                <event-block sid="103592706473028">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="7127726320703276" type="System" />
                                        <condition id="-7" inverted="1" name="Compare instance variable" sid="6086920565968861" type="Links">
                                            <param id="0" name="Instance variable">ToLayout</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;START&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="0" name="Call function" sid="3698316391214756" type="Function">
                                            <param id="0" name="Name">&quot;LoadLevel&quot;</param>
                                            <param id="1" name="Parameter {n}">Links.ToLayout{###}&quot;FadeIn&quot;{###}&quot;normal&quot;</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="7949177247916498">
                            <conditions>
                                <condition id="1" name="Is overlapping another object" sid="4653387142157805" type="Cursor">
                                    <param id="0" name="Object">PlayPauseBtn</param>
                                </condition>
                                <condition id="-9" name="Is visible" sid="6342314212708204" type="PlayPauseBtn" />
                            </conditions>
                            <actions>
                                <action id="4" name="Set animation" sid="1834338308431906" type="PlayPauseBtn">
                                    <param id="0" name="Animation">Self.AnimationName = &quot;On&quot; ? &quot;Off&quot; : &quot;On&quot;</param>
                                    <param id="1" name="From">1</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="7804496484397921">
                                    <conditions />
                                    <actions>
                                        <action id="8" name="Set silent" sid="1160086505337364" type="Audio">
                                            <param id="0" name="Mode">2</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Управление клавиатурой" inactive="1" sid="9545314253391404" title="KeyboardGame">
            <sub-events>
                <event-block sid="115">
                    <conditions>
                        <condition id="0" name="On key pressed" sid="116" type="Keyboard">
                            <param id="0" name="Key">38 (Up arrow)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="6191857376046633" type="Function">
                            <param id="0" name="Name">&quot;StartBall&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="127">
                    <conditions>
                        <condition id="2" name="Key is down" sid="128" type="Keyboard">
                            <param id="0" name="Key">37 (Left arrow)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="6914118719891495" type="Function">
                            <param id="0" name="Name">&quot;PlayerLeft&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="132">
                    <conditions>
                        <condition id="2" name="Key is down" sid="133" type="Keyboard">
                            <param id="0" name="Key">39 (Right arrow)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="2803193332319204" type="Function">
                            <param id="0" name="Name">&quot;PlayerRight&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="Управление мышью" inactive="1" sid="5624084333658723" title="MouseGame">
            <sub-events>
                <event-block sid="1477958093469799">
                    <conditions>
                        <condition id="0" name="On click" sid="1049566278994807" type="Mouse">
                            <param id="0" name="Mouse button">0</param>
                            <param id="1" name="Click type">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="1475444620558732" type="Function">
                            <param id="0" name="Name">&quot;StartBall&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1945905987194557">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="6569658171768379" type="System">
                            <param id="0" name="First value">Cursor.X</param>
                            <param id="1" name="Comparison">2</param>
                            <param id="2" name="Second value">player.ImagePointX(&quot;Left&quot;)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="9679212909414684" type="Function">
                            <param id="0" name="Name">&quot;PlayerLeft&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1210354388200274">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="4450530037006605" type="System">
                            <param id="0" name="First value">Cursor.X</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Second value">player.ImagePointX(&quot;Right&quot;)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="9602029551898051" type="Function">
                            <param id="0" name="Name">&quot;PlayerRight&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="Управление геймпадом (xbox 360)" inactive="1" sid="1249656894869304" title="GamePadGame">
            <sub-events>
                <comment>LEFT</comment>
                <event-block any="1" sid="9826463481818341">
                    <conditions>
                        <condition id="3" name="Is button down" sid="8744373380320261" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">14</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="7268727538968567" type="Function">
                            <param id="0" name="Name">&quot;PlayerLeft&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="7967311766558948">
                    <conditions>
                        <condition id="-22" name="Else" sid="5817961773306951" type="System" />
                        <condition id="5" name="Compare axis" sid="4098715934576989" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Axis">0</param>
                            <param id="2" name="Comparison">2</param>
                            <param id="3" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="7140571530286876" type="Function">
                            <param id="0" name="Name">&quot;PlayerLeft&quot;</param>
                            <param id="1" name="Parameter {n}">floor(abs(Gamepad.Axis(0, 0)))</param>
                        </action>
                    </actions>
                </event-block>
                <comment>RIGHT</comment>
                <event-block any="1" sid="7724559606883618">
                    <conditions>
                        <condition id="3" name="Is button down" sid="8184183192709966" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">15</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="912255292096071" type="Function">
                            <param id="0" name="Name">&quot;PlayerRight&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1690680009560929">
                    <conditions>
                        <condition id="-22" name="Else" sid="6474657037488204" type="System" />
                        <condition id="5" name="Compare axis" sid="2619633573235225" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Axis">0</param>
                            <param id="2" name="Comparison">4</param>
                            <param id="3" name="Value">0</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="9881517160681719" type="Function">
                            <param id="0" name="Name">&quot;PlayerRight&quot;</param>
                            <param id="1" name="Parameter {n}">floor(abs(Gamepad.Axis(0, 0)))</param>
                        </action>
                    </actions>
                </event-block>
                <event-block any="1" sid="4283180690238436">
                    <conditions>
                        <condition id="2" name="On gamepad disconnected" sid="6805746231819302" type="Gamepad" />
                    </conditions>
                    <actions>
                        <action id="0" name="Alert" sid="5865587272500141" type="Browser">
                            <param id="0" name="Message">&quot;GamePad disconnected! Please Connect it&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Start Ball</comment>
                <event-block any="1" sid="9699536255108712">
                    <conditions>
                        <condition id="6" name="On button pressed" sid="8718390933085603" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">0</param>
                        </condition>
                        <condition id="6" name="On button pressed" sid="724073721553335" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="7235988639376023" type="Function">
                            <param id="0" name="Name">&quot;StartBall&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
                <comment>Pause</comment>
                <event-block sid="3677622512914178">
                    <conditions>
                        <condition id="6" name="On button pressed" sid="5577403704781735" type="Gamepad">
                            <param id="0" name="Gamepad">0</param>
                            <param id="1" name="Button">8</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Call function" sid="4506019190401715" type="Function">
                            <param id="0" name="Name">&quot;Pause&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="" sid="6320964123323039" title="PlayerControls">
            <sub-events>
                <variable comment="Умножитель (вида val * this)" constant="1" name="MaxSpeedIndex" sid="384242051234757" static="0" type="number">2</variable>
                <comment>запуск шара</comment>
                <event-block sid="2265940895623925">
                    <conditions>
                        <condition id="0" name="On function" sid="6461685992590854" type="Function">
                            <param id="0" name="Name">&quot;StartBall&quot;</param>
                        </condition>
                        <condition id="-8" name="Compare two values" sid="4208049697937348" type="System">
                            <param id="0" name="First value">timescale</param>
                            <param id="1" name="Comparison">1</param>
                            <param id="2" name="Second value">0</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block collapsed="1" sid="4412282548227843">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="3934591253120106" type="player">
                                    <param id="0" name="Instance variable">ballPrilipnut</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set boolean" sid="3929641468314464" type="player">
                                    <param id="0" name="Instance variable">ballPrilipnut</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action behavior="Flash" id="0" name="Flash" sid="9803978927012424" type="player">
                                    <param id="0" name="&apos;On&apos; time">0.1</param>
                                    <param id="1" name="&apos;Off&apos; time">0.1</param>
                                    <param id="2" name="Duration">1.0</param>
                                </action>
                            </actions>
                            <sub-events>
                                <comment>устанавливаем мяч центрируя его к середине экрана</comment>
                                <event-block sid="7529604563980394">
                                    <conditions>
                                        <condition id="-11" name="For Each" sid="4316400674727623" type="System">
                                            <param id="0" name="Object">ball</param>
                                        </condition>
                                        <condition behavior="Pin" id="0" name="Is pinned" sid="6064734512335693" type="ball" />
                                    </conditions>
                                    <actions>
                                        <action behavior="Bullet" id="3" name="Set angle of motion" sid="5059816013494387" type="ball">
                                            <param id="0" name="Angle">int(angle(Function.Call(&quot;cx&quot;), &#x0D;&#x0A;  Function.Call(&quot;cy&quot;), &#x0D;&#x0A;  player.X, &#x0D;&#x0A;  player.Y) - 180)</param>
                                        </action>
                                        <action behavior="Pin" id="1" name="Unpin" sid="1377476437005697" type="ball" />
                                        <action id="-13" name="Set boolean" sid="8990732322610298" type="ball">
                                            <param id="0" name="Instance variable">isFly</param>
                                            <param id="1" name="Value">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>шаг влево</comment>
                <event-block collapsed="1" sid="4805098805118544">
                    <conditions>
                        <condition id="0" name="On function" sid="2738331251329781" type="Function">
                            <param id="0" name="Name">&quot;PlayerLeft&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="7340922147175178">
                            <conditions>
                                <condition id="1" name="Compare parameter" sid="5644899856599765" type="Function">
                                    <param id="0" name="Index">0</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="4" name="Set max speed" sid="6665131819939832" type="player">
                                    <param id="0" name="Max Speed">Function.Param(0) * MAXSPEEDINDEX</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="7916826689611596">
                            <conditions>
                                <condition behavior="Flash" id="0" inverted="1" name="Is flashing" sid="5342087533414959" type="player" />
                                <condition id="-8" name="Is boolean instance variable set" sid="509383005034009" type="player">
                                    <param id="0" name="Instance variable">IsMove</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="7" name="Simulate control" sid="6583793545217801" type="player">
                                    <param id="0" name="Control">0</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>шаг вправо</comment>
                <event-block collapsed="1" sid="4124734915202042">
                    <conditions>
                        <condition id="0" name="On function" sid="3972968672452599" type="Function">
                            <param id="0" name="Name">&quot;PlayerRight&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="2729960113520113">
                            <conditions>
                                <condition id="1" name="Compare parameter" sid="5311351449756648" type="Function">
                                    <param id="0" name="Index">0</param>
                                    <param id="1" name="Comparison">1</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="4" name="Set max speed" sid="8467719120589784" type="player">
                                    <param id="0" name="Max Speed">Function.Param(0) * MAXSPEEDINDEX</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="6839030340425194">
                            <conditions>
                                <condition behavior="Flash" id="0" inverted="1" name="Is flashing" sid="9803192818697962" type="player" />
                                <condition id="-8" name="Is boolean instance variable set" sid="5611078515598709" type="player">
                                    <param id="0" name="Instance variable">IsMove</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action behavior="8Direction" id="7" name="Simulate control" sid="9097841620800793" type="player">
                                    <param id="0" name="Control">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>пауза игры</comment>
                <event-block sid="5509329600620397">
                    <conditions>
                        <condition id="0" name="On function" sid="4585103586050366" type="Function">
                            <param id="0" name="Name">&quot;Pause&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="8501465475117754">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="1531119728071121" type="System">
                                    <param id="0" name="First value">timescale</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">1.0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-13" name="Set time scale" sid="3868481150903228" type="System">
                                    <param id="0" name="Time scale">0</param>
                                </action>
                                <action id="-15" name="Set visible" sid="9776875068772798" type="GameInfo">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                                <action id="-3" name="Create object" sid="7281070049177114" type="System">
                                    <param id="0" name="Object to create">PauseBackground</param>
                                    <param id="1" name="Layer">GameInfo.LayerNumber</param>
                                    <param id="2" name="X">0</param>
                                    <param id="3" name="Y">0</param>
                                </action>
                                <action id="-7" name="Set size" sid="5896504389400513" type="PauseBackground">
                                    <param id="0" name="Width">LayoutWidth</param>
                                    <param id="1" name="Height">LayoutHeight</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="9795811820154211">
                            <conditions>
                                <condition id="-22" name="Else" sid="8789927341587687" type="System" />
                            </conditions>
                            <actions>
                                <action id="0" name="Call function" sid="9107149410772271" type="Function">
                                    <param id="0" name="Name">&quot;LoadingFade&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                                <action id="-13" name="Set time scale" sid="6429942415228604" type="System">
                                    <param id="0" name="Time scale">1.0</param>
                                </action>
                                <action id="-15" name="Set visible" sid="8403147110179088" type="GameInfo">
                                    <param id="0" name="Visibility">0</param>
                                </action>
                                <action id="-9" name="Destroy" sid="8487055377208841" type="PauseBackground" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="3787282454352313">
                    <conditions />
                    <actions />
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="" sid="8264070808543387" title="MouseCursor">
            <sub-events>
                <event-block sid="4282210029171764">
                    <conditions>
                        <condition id="-4" name="Trigger once while true" sid="8506184558297307" type="System" />
                    </conditions>
                    <actions>
                        <action id="-12" name="Set group active" sid="896645230617202" type="System">
                            <param id="0" name="Group name">&quot;GamePadCursor&quot;</param>
                            <param id="1" name="State">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>mouse</comment>
                <event-block sid="2163614987242446">
                    <conditions>
                        <condition id="2" inverted="1" name="Is playing" sid="5348328242135991" type="Cursor">
                            <param id="0" name="Animation">&quot;Game&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-3" name="Set position" sid="575561129967534" type="Cursor">
                            <param id="0" name="X">Mouse.X</param>
                            <param id="1" name="Y">Mouse.Y</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="2946645385234466">
                    <conditions>
                        <condition id="-22" name="Else" sid="8814350757171426" type="System" />
                    </conditions>
                    <actions>
                        <action id="-3" name="Set position" sid="6903670695992674" type="Cursor">
                            <param id="0" name="X">Mouse.X</param>
                            <param id="1" name="Y">LayoutHeight / 2</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group collapsed="1" description="" inactive="1" sid="4219313757675232" title="GamePadCursor">
            <sub-events>
                <event-block sid="7401527571672944">
                    <conditions>
                        <condition id="-4" name="Trigger once while true" sid="2511524308733503" type="System" />
                    </conditions>
                    <actions>
                        <action id="-12" name="Set group active" sid="297452096602223" type="System">
                            <param id="0" name="Group name">&quot;MouseCursor&quot;</param>
                            <param id="1" name="State">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>gamepad</comment>
                <event-block sid="6956610831180431">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="2529205018270477" type="System" />
                    </conditions>
                    <actions>
                        <action id="-24" name="Move to top" sid="9239310791839688" type="Cursor" />
                        <action id="-3" name="Set position" sid="5754374927209709" type="Cursor">
                            <param id="0" name="X">Function.Call(&quot;cx&quot;) + Gamepad.Axis(0,0)</param>
                            <param id="1" name="Y">Function.Call(&quot;cy&quot;) + Gamepad.Axis(0,1)</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
